/*
*ENcycle Tmin 1000ns 
*ENHigh  Tmin  450ns 
*ENLow   Tmin  450ns
*        Tasu  140ns
*        Tdsu  200ns
*        Tbusy 1<Fclk<3
*Fclk  Tmin 2.5us Tmax 20us
*/
#include <iopwm316.h>
#include "LCD12864.h"
#include "SN74HC573.h"
#include "IO_PORT.h"
#include "delay.h"

#define  SET_RS()         SETPIN(PORT_LCD_RS,LCD_RS)
#define  CLR_RS()         CLRPIN(PORT_LCD_RS,LCD_RS)

#define  SET_RW()         SETPIN(PORT_LCD_RW,LCD_RW)
#define  CLR_RW()         CLRPIN(PORT_LCD_RW,LCD_RW)

#define  SET_E()          SETPIN(PORT_LCD_E,LCD_E)
#define  CLR_E()          CLRPIN(PORT_LCD_E,LCD_E)




//*******************************************************************
// 定义ASCII字库8列*8行 （纵向取模）
//*******************************************************************
#ifdef USE_ASCII
__flash unsigned char ASC_8[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00, 	//" "=20H
  0x00,0x06,0x5F,0x5F,0x06,0x00,0x00,0x00, 	//"!"=21H
  0x00,0x00,0x07,0x00,0x07,0x00,0x00,0x00, 	//"""=22H 
  0x00,0x14,0x7f,0x14,0x7f,0x14,0x00,0x00, 	//"#"=23H 
  0x00,0x24,0x2a,0x7f,0x2a,0x12,0x00,0x00,	//"$"=24H 
  0x00,0x23,0x13,0x08,0x64,0x62,0x00,0x00, 	//"%"=25H 
  0x00,0x36,0x49,0x55,0x22,0x50,0x00,0x00, 	//"&"=26H 
  0x00,0x00,0x05,0x03,0x00,0x00,0x00,0x00, 	//"'"=27H
  0x00,0x1C,0x3E,0x63,0x41,0x00,0x00,0x00, 	//"("=28H
  0x00,0x41,0x63,0x3E,0x1C,0x00,0x00,0x00, 	//")"=29H
  0x00,0x14,0x08,0x3e,0x08,0x14,0x00,0x00, 	//"*"=2AH 
  0x00,0x08,0x08,0x3e,0x08,0x08,0x00,0x00, 	//"+"=2BH 
  0x80,0xE0,0x60,0x00,0x00,0x00,0x00,0x00, 	//","=2CH
  0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x1C,0x00,	//"-"=2DH
  0x00,0x60,0x60,0x00,0x00,0x00,0x00,0x00,	//"."=2EH
  0x00,0x20,0x10,0x08,0x04,0x02,0x00,0x00, 	//"/"=2FH
  0x3E,0x7F,0x71,0x59,0x4D,0x7F,0x3E,0x00,    //"0"=30H
  0x00,0x42,0x7F,0x7F,0x40,0x00,0x00,0x00,	//"1"=31H
  0x62,0x73,0x59,0x49,0x4F,0x46,0x00,0x00,	//"2"=32H
  0x22,0x63,0x49,0x49,0x7F,0x36,0x00,0x00,	//"3"=33H 
  0x1C,0x1E,0x13,0x51,0x7F,0x7F,0x50,0x00,	//"4"=34H 
  0x27,0x67,0x45,0x45,0x7D,0x39,0x00,0x00,	//"5"=35H
  0x3C,0x7E,0x4B,0x49,0x79,0x30,0x00,0x00,	//"6"=36H
  0x03,0x03,0x71,0x79,0x0F,0x07,0x00,0x00,	//"7"=37H 
  0x36,0x7F,0x49,0x49,0x7F,0x36,0x00,0x00,	//"8"=38H
  0x26,0x6F,0x49,0x49,0x7F,0x3E,0x00,0x00,	//"9"=39H
  0x00,0x00,0x66,0x66,0x00,0x00,0x00,0x00,	//":"=3AH
  0x00,0x00,0x56,0x36,0x00,0x00,0x00,0x00, 	//";"=3BH         
  0x00,0x08,0x14,0x22,0x41,0x00,0x00,0x00, 	//"<"=3CH         
  0x00,0x14,0x14,0x14,0x14,0x14,0x00,0x00, 	//"="=3DH        
  0x00,0x00,0x41,0x22,0x14,0x08,0x00,0x00, 	//">"=3EH        
  0x00,0x02,0x01,0x51,0x09,0x06,0x00,0x00, 	//"?"=3FH        
  0x00,0x32,0x49,0x79,0x41,0x3e,0x00,0x00, 	//"@"=40H      
  0x7C,0x7E,0x13,0x13,0x7E,0x7C,0x00,0x00,	//"A"=41H 
  0x41,0x7F,0x7F,0x49,0x49,0x7F,0x36,0x00,	//"B"=42H
  0x1C,0x3E,0x63,0x41,0x41,0x63,0x22,0x00,	//"C"=43H 
  0x41,0x7F,0x7F,0x41,0x63,0x3E,0x1C,0x00,	//"D"=44H
  0x41,0x7F,0x7F,0x49,0x49,0x63,0x63,0x00,	//"E"=45H 
  0x41,0x7F,0x7F,0x49,0x1D,0x01,0x03,0x00,	//"F"=46H
  0x1C,0x3E,0x63,0x41,0x51,0x73,0x72,0x00,	//"G"=47H
  0x7F,0x7F,0x08,0x08,0x7F,0x7F,0x00,0x00,	//"H"=48H
  0x00,0x41,0x7F,0x7F,0x41,0x00,0x00,0x00,	//"I"=49H
  0x61,0x41,0x41,0x7F,0x7F,0x01,0x00,0x00,	//"J"=4AH
  0x7F,0x7F,0x1C,0x36,0x63,0x41,0x00,0x00,	//"K"=4BH
  0x41,0x7F,0x7F,0x41,0x40,0x60,0x70,0x00,	//"L"=4CH
  0x7F,0x7F,0x06,0x1C,0x06,0x7F,0x7F,0x00,	//"M"=4DH
  0x7F,0x7F,0x06,0x0C,0x18,0x7F,0x7F,0x00,	//"N"=4EH
  0x1C,0x3E,0x63,0x41,0x63,0x3E,0x1C,0x00,	//"O"=4FH
  0x41,0x7F,0x7F,0x09,0x09,0x0F,0x06,0x00,	//"P"=50H
  0x1C,0x7E,0x63,0x51,0x63,0x3E,0x5C,0x00,	//"Q"=51H
  0x41,0x7F,0x7F,0x09,0x19,0x7F,0x66,0x00,	//"R"=52H 
  0x26,0x6F,0x4D,0x59,0x73,0x32,0x00,0x00,	//"S"=53H
  0x03,0x41,0x7F,0x7F,0x41,0x03,0x00,0x00,	//"T"=54H 
  0x7F,0x7F,0x40,0x40,0x7F,0x7F,0x00,0x00,	//"U"=55H
  0x07,0x1F,0x78,0x40,0x78,0x1F,0x07,0x00,	//"V"=56H
  0x7F,0x7F,0x30,0x1C,0x30,0x7F,0x7F,0x00,	//"W"=57H
  0x41,0x63,0x3E,0x08,0x3E,0x63,0x41,0x00,	//"X"=58H
  0x07,0x4F,0x78,0x78,0x4F,0x07,0x00,0x00,	//"Y"=59H 
  0x43,0x61,0x71,0x59,0x4D,0x47,0x63,0x00,	//"Z"=5AH 
  0x00,0x00,0x7f,0x41,0x41,0x00,0x00,0x00, 	//"["=5BH 
  0x00,0x02,0x04,0x08,0x10,0x20,0x00,0x00, 	//"\"=5CH 
  0x00,0x00,0x41,0x41,0x7f,0x00,0x00,0x00, 	//"]"=5DH 
  0x00,0x04,0x02,0x01,0x02,0x04,0x00,0x00, 	//"^"=5EH 
  0x00,0x40,0x40,0x40,0x40,0x40,0x00,0x00, 	//"_"=5FH 
  0x00,0x01,0x02,0x04,0x00,0x00,0x00,0x00, 	//"`"=60H       
  0x20,0x54,0x54,0x54,0x38,0x78,0x40,0x00,	//"a"=61H
  0x7F,0x7F,0x48,0x44,0x44,0x7C,0x38,0x00,	//"b"=62H
  0x38,0x7C,0x44,0x44,0x6C,0x28,0x00,0x00,	//"c"=63H
  0x30,0x78,0x48,0x49,0x3F,0x7F,0x40,0x00,	//"d"=64H
  0x38,0x7C,0x54,0x54,0x5C,0x18,0x00,0x00,	//"e"=65H
  0x48,0x7E,0x7F,0x49,0x03,0x02,0x00,0x00,	//"f"=66H
  0x98,0xBC,0xA4,0xA4,0xF8,0x7C,0x04,0x00,	//"g"=67H
  0x41,0x7F,0x7F,0x08,0x04,0x7C,0x78,0x00,	//"h"=68H
  0x00,0x44,0x7D,0x7D,0x40,0x00,0x00,0x00,	//"i"=69H
  0x20,0x60,0x40,0x44,0x7D,0x3D,0x00,0x00,	//"j"=6AH 
  0x41,0x7F,0x7F,0x10,0x38,0x6C,0x44,0x00,	//"k"=6BH
  0x00,0x41,0x7F,0x7F,0x40,0x00,0x00,0x00,	//"l"=6CH
  0x7C,0x7C,0x18,0x38,0x18,0x7C,0x7C,0x00,	//"m"=6DH
  0x7C,0x7C,0x04,0x04,0x7C,0x78,0x00,0x00,	//"n"=6EH
  0x38,0x7C,0x44,0x44,0x7C,0x38,0x00,0x00,	//"o"=6FH
  0x84,0xFC,0xF8,0xA4,0x24,0x3C,0x18,0x00,	//"p"=70H
  0x0C,0x1E,0x1E,0x92,0xFE,0xFE,0x92,0x00,	//"q"=71H
  0x44,0x7C,0x78,0x4C,0x04,0x1C,0x18,0x00,	//"r"=72H
  0x48,0x5C,0x54,0x54,0x74,0x24,0x00,0x00,	//"s"=73H
  0x00,0x04,0x3E,0x7F,0x44,0x24,0x00,0x00,	//"t"=74H
  0x3C,0x7C,0x40,0x40,0x3C,0x7C,0x40,0x00,	//"u"=75H
  0x1C,0x3C,0x60,0x60,0x3C,0x1C,0x00,0x00,	//"v"=76H
  0x3C,0x7C,0x70,0x38,0x70,0x7C,0x3C,0x00,	//"w"=77H
  0x44,0x6C,0x38,0x10,0x38,0x6C,0x44,0x00,	//"x"=78H
  0x9C,0xBC,0xA0,0xA0,0xFC,0x7C,0x00,0x00,	//"y"=79H
  0x44,0x64,0x74,0x5C,0x4C,0x44,0x00,0x00,	//"z"=7AH
  0x00,0x00,0x08,0x36,0x41,0x00,0x00,0x00, 	//"{"=7BH 
  0x00,0x00,0x00,0x77,0x00,0x00,0x00,0x00, 	//"|"=7CH 
  0x00,0x00,0x41,0x36,0x08,0x00,0x00,0x00, 	//"}"=7DH 
  0x00,0x02,0x01,0x02,0x04,0x02,0x00,0x00, 	//"~"=7EH 
  0x00,0xff,0xff,0xff,0xff,0xff,0x00,0x00 	//" "=7FH 
};
#endif
//LOGO 开元图标
__flash unsigned char Logo[][128]={
  {
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x80,0xF0,0xFC,0xFF,0xFF,0xFF,0xFF,0x3F,
    0x0F,0x03,0x00,0x00,0xF0,0xF8,0xFC,0xFE,0xFF,0xFF,0x7F,0x3F,0x3F,0x3F,0x7F,0xFF,
    0xFF,0xFE,0xFC,0xF8,0xF0,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
    0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x80,0x00,0x00,0x80,0xFF,0xFF,0xFF,0xFF,
    
    0xFF,0xFF,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0xF0,0xF8,0xFC,0xFE,0xFF,0xFF,0x7F,
    0x3F,0x3F,0x3F,0x7F,0xFF,0xFF,0xFE,0xFC,0xF8,0xF0,0x00,0x00,0x00,0x00,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0xE0,0xC0,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  },
  {
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x0F,0x0F,0x3F,0xFF,0xFF,0xFF,0xFF,0xFC,0xFC,
    0xF8,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x7C,0x7C,0x7E,0xFF,
    0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
    0x00,0x00,0x03,0x07,0x0F,0x1F,0x3F,0xFF,0xFF,0xFE,0xFE,0xFF,0xFF,0x3F,0x1F,0x0F,
    
    0x07,0x03,0x00,0x00,0x7F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x80,0x80,0x80,0xC0,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
    0x00,0x7C,0x7C,0x7E,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0xFF,0xFF,
    0xFF,0xFF,0xFF,0xFF,0x1F,0x7F,0xFF,0xFF,0xFF,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
  },
  {
    0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,
    0x1F,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x1F,
    0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,
    
    0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x0F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,
    0xDF,0x1F,0x0F,0x07,0x03,0x00,0xC0,0x00,0x40,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,
    0x00,0x00,0x00,0x00,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x1F,0x1F,
    0x1F,0x1F,0x1F,0x1F,0x00,0x00,0x00,0x03,0x07,0x0F,0x1F,0x1F,0x1F,0x1F,0x0F,0x07,
  },
  {
    0x00,0x00,0x00,0x03,0x0C,0x30,0x0E,0x01,0x0E,0x30,0x0C,0x03,0x00,0x03,0x0C,0x30,
    0x0E,0x01,0x0E,0x30,0x0C,0x03,0x00,0x03,0x0C,0x30,0x0E,0x01,0x0E,0x30,0x0C,0x03,
    0x00,0x00,0x20,0x00,0x12,0x25,0x25,0x29,0x12,0x00,0x1E,0x25,0x25,0x25,0x16,0x00,
    0xFF,0x12,0x21,0x21,0x1E,0x00,0x1E,0x21,0x21,0x21,0x12,0x00,0x08,0x08,0x08,0x00,
    
    0x03,0x0C,0x30,0x0E,0x01,0x0E,0x30,0x0C,0x03,0x00,0x1E,0x25,0x25,0x25,0x16,0x00,
    0x3F,0x00,0x1E,0x21,0x21,0x12,0x3F,0x00,0x3F,0x00,0x3F,0x01,0x01,0x01,0x3E,0x00,
    0x9E,0xA1,0xA1,0x92,0x7F,0x00,0x00,0x20,0x00,0x1E,0x21,0x21,0x21,0x12,0x00,0x1E,
    0x21,0x21,0x21,0x1E,0x00,0x3E,0x01,0x01,0x3F,0x01,0x01,0x3E,0x00,0x00,0x00,0x00,
  },
};
/*
*读取忙状态函数
*RS:L R\W:H
*
*/
static void Lcd_GetBusy(void)
{
  /*输入状态*/
  LCD_DDR=0x00;
  PORTB=0xff;
  /**/
  CLR_RS();
  SET_RW();
  __disable_interrupt();
  SET_E();
  /*获取端口状态*/
  Nop();
  Nop();
  while(0x80 & LCD_DB_PIN);
  /*恢复为输出状态*/
  CLR_E();
  __enable_interrupt();
  LCD_DDR=0XFF;
}
/*
*写命令
*RS:L R\W:L E:H
*
*/
void Write_Cmd(unsigned char Cmd){
  /*检测忙*/
  Lcd_GetBusy();
  CLR_RS();
  CLR_RW();
  __disable_interrupt();
  OUTPUT_LCD_DB(Cmd);
  Nop();
  Nop();
  SET_E();
  Delay_us(1);
  CLR_E();
  __enable_interrupt();
  Nop();
}
/*
*写数据
*RS:H R\W:L E:H
*
*/
void Write_Data(unsigned char Data){
  /*检测忙*/
  Lcd_GetBusy();
  SET_RS();
  CLR_RW();
  __disable_interrupt();
  OUTPUT_LCD_DB(Data);
  Nop();
  Nop();
  SET_E();
  Delay_us(1);
  CLR_E();
  __enable_interrupt();
}
/*
*读数据
*RS:H R\W:L E:H
*
*/
unsigned char Read_Data(void){
  unsigned char temp;
  /*输入状态*/
  PORTB=0xff;
  LCD_DDR=0x00;
  /**/
  SET_RS();
  SET_RW();
  CLR_E();
  Delay_us(5);
  SET_E();
  Delay_us(5);
  /**/
  CLR_E();
  Delay_us(5);
  __disable_interrupt();
  SET_E();
  Delay_us(5);
  /*获取端口状态*/
  temp=LCD_DB_PIN;
  /*恢复为输出状态*/
  __enable_interrupt();
  CLR_E();
  PORTB=0x00;
  LCD_DDR=0XFF;
  return temp;
}
/*
*设定显示坐标
*
*/
void Set_Cursor(unsigned char x,unsigned char y){
  /*左边区*/
  if(y<LCD_LEFT_MAX)
    LCD_LEFT(); /*左边区片选*/
  else
    LCD_RIGHT();/*片选右半区*/
  Write_Cmd(LCD_SETPAGE(x));
  Write_Cmd(LCD_SETADDRESS(y));
}
/*
*清屏函数
*
*/
void Clr_LCD(void){
  unsigned char x,y;
  for(x=0;x<8;x++){
    LCD_LEFT();
    Write_Cmd(LCD_SETPAGE(x));
    for(y=0;y<128;y++){
      if(y==64){
        LCD_RIGHT();
        Write_Cmd(LCD_SETPAGE(x));
      }
      Write_Data(0x00);
    }
  }
}
/*
*初始化液晶
*
*/
void LCD_Init(void){
  
  LCD_LEFT();
  Write_Cmd(LCD_DISPLAYSTARTLINE(0));
  Write_Cmd(LCD_DISPLAY_ON);
  LCD_RIGHT();
  Write_Cmd(LCD_DISPLAYSTARTLINE(0));
  Write_Cmd(LCD_DISPLAY_ON);
  Clr_LCD();
}
/*
*液晶显示单个字符
*
*/
#ifdef USE_ASCII
void Display_Char(unsigned char x,unsigned char y,unsigned char Char){
  
  unsigned char width;
  for(width=0;width<8;width++){
    Set_Cursor(y,x+width);
    Write_Data(ASC_8[(Char-32)*8+width]);
  }
}
/*
*液晶显示字符串
*
*/
void Display_String(unsigned char x,unsigned char y,unsigned char *pString){
  
  /*字符串串尾\0*/
  while(*pString!='\0'){
    Display_Char(x,y,*pString);
    pString++;
    x+=8;
  }
  
}
#endif
/*
*液晶显示字符串
*
*/
void Display_Logo(unsigned char y){
  unsigned char i,j;
  for(i=0;i<4;i++){
    for(j=0;j<128;j++){
      Set_Cursor(y,j);
      Write_Data(Logo[i][j]);
    }
    y++;
  }
  for(i=0;i<65;i++){
    LCD_LEFT();
    Write_Cmd(LCD_DISPLAYSTARTLINE(i));
    LCD_RIGHT();
    Write_Cmd(LCD_DISPLAYSTARTLINE(i));
    Delay_us(50000);
  }
  Delay_us(2000000);
}

void Display_Chinese(unsigned char *x,unsigned char y,unsigned char __flash *Ch,unsigned char width){
  
  unsigned long temp;
  unsigned char i;
  for(i=0;i<width;i++){
    if(*x>128)
      *x=128;
    temp=*(Ch+1);
    temp<<=8;
    temp|=*Ch;
    Ch+=2;
    switch(y){
      case 0:
      Set_Cursor(0,*x);
      Write_Data((unsigned char)temp);
      Set_Cursor(1,*x);
      temp>>=8;
      temp|=(Read_Data()&0xe0);//重组新数据
      Set_Cursor(1,*x);
      Write_Data((unsigned char)(temp));
      break;
      case 1:
      temp<<=5;//左移5位
      Set_Cursor(1,*x);//读取第一行old数据
      temp|=(Read_Data()&0x1f);//重组新数据
      Set_Cursor(1,*x);//读取第一行old数据
      Write_Data((unsigned char)temp);//写入低字
      Set_Cursor(2,*x);//选取第二行
      temp>>=8;
      Write_Data((unsigned char)(temp));//写入数据
      Set_Cursor(3,*x);//选取第三行
      temp>>=8;
      temp|=(Read_Data()&0xfe);//重组新数据;
      Set_Cursor(3,*x);//选取第三行
      Write_Data((unsigned char)temp);//写入数据
      break;
      case 2:
      temp<<=2;//左移2位
      Set_Cursor(3,*x);//读取第一行old数据
      temp|=(Read_Data()&0x03);//重组新数据
      Set_Cursor(3,*x);//读取第一行old数据
      Write_Data((unsigned char)temp);//写入低字
      Set_Cursor(4,*x);//选取第三行
      temp>>=8;
      temp|=(Read_Data()&0xC0);//重组新数据
      Set_Cursor(4,*x);//选取第三行
      Write_Data((unsigned char)temp);//写入数据
      break;
      case 3:
      temp<<=7;//左移7位
      Set_Cursor(4,*x);//读取第一行old数据
      temp|=(Read_Data()&0x7f);//重组新数据
      Set_Cursor(4,*x);//读取第一行old数据
      Write_Data((unsigned char)temp);//写入低字
      Set_Cursor(5,*x);//选取第二行
      temp>>=8;
      Write_Data((unsigned char)(temp));//写入数据
      Set_Cursor(6,*x);//选取第三行
      temp>>=8;
      temp|=(Read_Data()&0xf0);//重组新数据
      Set_Cursor(6,*x);//选取第三行
      Write_Data((unsigned char)temp);//写入数据
      break;
      case 4:
      temp<<=4;//左移5位
      Set_Cursor(6,*x);//读取第一行old数据
      temp|=(Read_Data()&0x0f);//重组新数据
      Set_Cursor(6,*x);//读取第一行old数据
      Write_Data((unsigned char)temp);//写入低字
      Set_Cursor(7,*x);//选取第三行
      temp>>=8;
      Write_Data((unsigned char)temp);//写入数据
      break;
    }
    (*x)++;
  }
}
